<style>
    #amount {
        border: none;
        border-bottom: 1px solid #ced4da;
        outline: none;
        padding-bottom: 5px;
        width: 100%;
        font-size: 24px;
    }

    #optionAmount {
        background-color: var(--gradient-base-background-2);
        color: #000;
        border: none
    }

    #optionAmount.active {
        background-color: var(--palette-03);
        color: white;
    }

    #optionAmount:hover {
        background-color: var(--gradient-base-background-3);
        color: #000;
        transition: background-color 0.3s ease;
    }

    @media (max-width: 1024px) {
        #balanceContainer {
            flex-direction: column;
        }
    }
</style>
<div class="modal fade" id="balanceModal" tabindex="-1" aria-labelledby="balanceModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="balanceModalLabel">TOP UP BALANCE</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="d-flex flex-column align-items-center gap-3 w-100 p-3" id="balanceContainer">
                    <h5>Enter amount you want to top up:</h5>
                    <div class="d-flex align-items-center justify-content-evenly mb-3 gap-3">
                        <button class="btn btn-secondary" onclick="adjustAmount(-1)">-</button>
                        <h1 class="fs-1 text-success fw-bold m-0">$<span id="amountValue">0</span></h1>
                        <button class="btn btn-secondary" onclick="adjustAmount(1)">+</button>
                    </div>
                    <a href="#" id="balanceLink">
                        <div class='btn btn-primary rounded-0 border-0 shopping-btn'
                            style='background-color: var(--palette-02); padding: 0.75rem 6rem; '>
                            Continue</div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const amountInput = document.getElementById('amountValue');
    const userId = "{{session.user._id}}"

    const defaultAmount = 0;
    amountInput.value = defaultAmount;

    function updateBalanceLink() {
        const balanceLink = document.getElementById('balanceLink');
        balanceLink.href = `/balance/${userId}/recharge?amount=${amountInput.value}`;
    }

    function setAmount(amount) {
        amountInput.textContent = amount;
        amountInput.value = amount;
        updateBalanceLink(); // Update the balance link when amount changes
    }

    function adjustAmount(delta) {
        // Adjust the amount based on the delta (1 for increase, -1 for decrease)
        let currentAmount = parseInt(amountInput.value) || 0;
        let newAmount = currentAmount + delta;

        if (newAmount < 0) {
            newAmount = 0; 
        }
        setAmount(newAmount);
    }

    updateBalanceLink(); // Initial setup of the balance link
</script>